import{_ as U}from"./MainPage.vue_vue_type_script_setup_true_lang-BqA-Oh52.js";import{c as I,s as L,a as D}from"./index-B4l8Q6L1.js";import{_ as E}from"./NoResult.vue_vue_type_script_setup_true_lang-PIGwQAtL.js";import{ad as M,r as _,s as T,ae as P,d as F,l as q,o as p,p as f,w as i,a as t,b as e,i as A,e as w,F as H,h as S,X as O}from"./index-BDS4vS0l.js";import{s as j}from"./index-CYvpaykO.js";import{a as G,_ as X}from"./BaseInputText.vue_vue_type_script_setup_true_lang-9cCHDsxv.js";import{s as z}from"./index-V5sUocjm.js";import{s as J}from"./index-4_viuIm6.js";import{u as K,h as x}from"./create-event.store-CGYEzEVj.js";import"./index-DxpHxkHb.js";import"./index-3Xk4mkJn.js";const h=M("tickets",()=>{const u=_([]),{eventId:r}=T(K()),n=_({name:"",price:0,status:"open",description:""});return{form:n,list:u,getList:async()=>{const d=await x.get(`/tickets/${r.value}`);return u.value=d.data,d.data},resetForm:()=>{n.value={name:"",price:0,status:"open",description:""}},add:async()=>(n.value.eventId=r.value,x.post("/ticket",P(n.value)))}}),Q={class:"flex flex-col gap-3"},W={class:"flex justify-between"},Y=F({__name:"TicketForm",setup(u,{expose:r}){const n=q(),l=_(!1),c=h(),{form:o}=T(c),{add:d,resetForm:V,getList:v}=c,k=async()=>(await d(),n.add({severity:"success",summary:"Success",detail:"Ticket successfully added",life:3e3}),l.value=!1,await v(),!0),b=[{label:"Open",value:"open"},{label:"Closed",value:"closed"},{label:"Marked as sold out",value:"sold-out"}];return r({visible:l}),(m,s)=>{const g=G,C=I,y=X,N=j,$=S;return p(),f(e(H),{onSubmit:k,id:"add-ticket-form"},{default:i(({isSubmitting:B,meta:R})=>[t(e(z),{visible:e(l),"onUpdate:visible":s[5]||(s[5]=a=>A(l)?l.value=a:null),header:"Add Ticket",position:"right",class:"!w-full md:!w-80 lg:!w-[30rem]",onHide:e(V)},{footer:i(()=>[w("div",W,[t($,{onClick:s[4]||(s[4]=a=>l.value=!1),severity:"secondary",label:"Close",outlined:""}),t($,{label:"Done",type:"submit",form:"add-ticket-form",loading:B,disabled:!R.valid},null,8,["loading","disabled"])])]),default:i(()=>[w("div",Q,[t(g,{label:"Name",name:"name",required:"",rules:"required",modelValue:e(o).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(o).name=a)},null,8,["modelValue"]),t(y,{label:"Price"},{default:i(()=>[t(C,{modelValue:e(o).price,"onUpdate:modelValue":s[1]||(s[1]=a=>e(o).price=a),min:0},null,8,["modelValue"])]),_:1}),t(y,{label:"Status"},{default:i(()=>[t(e(J),{modelValue:e(o).status,"onUpdate:modelValue":s[2]||(s[2]=a=>e(o).status=a),options:b,placeholder:"Status","option-label":"label","option-value":"value"},null,8,["modelValue"])]),_:1}),t(y,{label:"Description"},{default:i(()=>[t(N,{ref:"editorRef",modelValue:e(o).description,"onUpdate:modelValue":s[3]||(s[3]=a=>e(o).description=a),editorStyle:"height: 200px"},null,8,["modelValue"])]),_:1})])]),_:2},1032,["visible","onHide"])]),_:1})}}}),de=F({__name:"Tickets",setup(u){const r=h(),{list:n}=T(r),{getList:l}=r,c=_(null),o=()=>{c.value.visible=!0};return O(()=>{l()}),(d,V)=>{const v=S,k=Y,b=E,m=L,s=D,g=U;return p(),f(g,{title:"Tickets",class:"container mx-auto p-4"},{action:i(()=>[t(v,{label:"Add Ticket",icon:"pi pi-plus",onClick:o})]),default:i(()=>[t(k,{ref_key:"speakerForm",ref:c},null,512),e(n).length===0?(p(),f(b,{key:0,title:"No Tickets",info:"Create and sell tickets to check in attendees here during the event",icon:"pi pi-ticket"})):(p(),f(s,{key:1,value:e(n)},{default:i(()=>[t(m,{field:"name",header:"Name"}),t(m,{field:"price",header:"Price"}),t(m,{field:"status",header:"Status"})]),_:1},8,["value"]))]),_:1})}}});export{de as default};
